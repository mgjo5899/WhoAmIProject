version: '3'

services:
    database:
        image: mysql:5.7
        ports:
            - "3306:3306"
        environment:
            - MYSQL_USER=admin
            - MYSQL_PASSWORD=adminpw1
            - MYSQL_DATABASE=whoamiproject
            - MYSQL_ROOT_PASSWORD=adminpw1
            - MYSQL_ROOT_HOST=% # allows non-docker accesses
    backend:
        image: whoamiproject_backend:0.0.1
        environment:
            - MYSQL_USER=admin
            - MYSQL_PASSWORD=adminpw1
            - MYSQL_HOST=database
            - MYSQL_PORT=3306
        ports:
            - "8000:8000"
        links:
            - database
    frontend:
        image: whoamiproject_frontend:0.0.1
        ports:
            - "3000:3000"
        links:
            - database
